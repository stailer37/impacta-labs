# üöÄ Caso de Estudo NoSQL - Amazonas E-commerce

-----

## üë• Integrantes do Grupo

| Nome | 
| :--- | 
| **Gabriel Morais Simonini Sussmann** |
| **Bruno Boggio** |
| **Nelson Francisco Valerio dos Reis** |
| **Denis Varela** |

-----

## üèóÔ∏è Decis√µes de Arquitetura

Neste projeto, optamos por uma arquitetura de dados baseada em **tr√™s cole√ß√µes separadas** no MongoDB para otimizar a performance, flexibilidade e manutenibilidade.

### üóÑÔ∏è Estrutura de Collections

| Collection | Descri√ß√£o Principal | Foco da Otimiza√ß√£o |
| :--- | :--- | :--- |
| **`customers`** | Dados cadastrais e geogr√°ficos dos clientes. | Consultas sobre perfis de usu√°rio. |
| **`products`** | Cat√°logo completo de itens com detalhes por categoria. | Facilidade na manuten√ß√£o do cat√°logo e flexibilidade de esquema. |
| **`events`** | Registros de cliques e transa√ß√µes de compra. | An√°lises temporais e rastreamento de comportamento. |

### üí° Justificativas das Decis√µes

#### 1\. Por que a Desnormaliza√ß√£o Estrat√©gica?

  - **`Customers` Collection:** Cont√©m dados est√°veis do cliente. Permite **normaliza√ß√£o** de dados geogr√°ficos (como o estado) para manter a integridade e facilitar consultas anal√≠ticas por regi√£o.
  - **`Products` Collection:** Sua estrutura flex√≠vel (**esquema *schema-less***) √© ideal para um e-commerce com diversos tipos de produtos (livros, CDs, eletrodom√©sticos), facilitando a adi√ß√£o de novos campos espec√≠ficos sem alterar o esquema principal.
  - **`Events` Collection:** Projetada para **escrita intensiva**. Armazenar eventos separados √© crucial para an√°lises de *funil de vendas* e *comportamento do usu√°rio*, sendo otimizada para consultas temporais (s√©ries temporais).

#### 2\. Vantagens da Abordagem Escolhida

| Benef√≠cio | Descri√ß√£o |
| :--- | :--- |
| **Escalabilidade** | Cole√ß√µes separadas permitem **indexa√ß√£o** e **sharding** independentes, garantindo que o crescimento de uma cole√ß√£o n√£o impacte a performance das outras. |
| **Flexibilidade** | O esquema permite a f√°cil adi√ß√£o de novos tipos de produtos ou eventos. |
| **Performance** | Consultas otimizadas, pois cada *query* mira em uma cole√ß√£o espec√≠fica, reduzindo o *scan* de documentos irrelevantes. |
| **Manutenibilidade** | Estrutura clara e organizada, facilitando a compreens√£o e o gerenciamento do banco de dados. |

-----

## üìä Consulta de Exemplo

A principal consulta escolhida para demonstrar a modelagem anal√≠tica √©:

> **Calcular o valor m√©dio de vendas por estado.**
>
> ‚û°Ô∏è *Consulte o arquivo **`command_mongo.sh`** para ver o pipeline de agrega√ß√£o completo.*

-----

## üõ†Ô∏è Passo a Passo de Execu√ß√£o (VS Code / Docker)

Siga os passos abaixo para configurar e rodar o projeto em seu ambiente local.

### 1\. üê≥ Configura√ß√£o e Build do Docker

Navegue para a pasta `no-sql-databases/case_nosql_oficial/mongodb` e execute:

```bash
# Constr√≥i a imagem Docker do MongoDB
docker build -t case_mongodb .
```

### 2\. üöÄ Iniciando o Container

Inicie o container do MongoDB, mapeando a porta `27017`:

```bash
# Inicia o container em modo 'detached'
docker run -d -p 27017:27017 --name mongodb_case case_mongodb
```

### 3\. üì• Importando os Documentos

Copie os arquivos `.json` de dados para dentro do container:

```bash
docker cp customers.json mongodb_case:/customers.json
docker cp events.json mongodb_case:/events.json
docker cp products.json mongodb_case:/products.json
```

Em seguida, execute os comandos de importa√ß√£o para popular as collections:

```bash
docker exec -it mongodb_case mongoimport --db test --collection customers --file /customers.json --type json --legacy
docker exec -it mongodb_case mongoimport --db test --collection events --file /events.json --type json --legacy
docker exec -it mongodb_case mongoimport --db test --collection products --file /products.json --type json --legacy
```

### 4\. üî¨ Executando a Consulta

Acesse o *shell* do MongoDB dentro do container e execute a *query* anal√≠tica:

```bash
# Acesse o mongosh
docker exec -it mongodb_case mongosh

# Dentro do mongosh, execute o c√≥digo de agrega√ß√£o do arquivo command_mongo.sh



